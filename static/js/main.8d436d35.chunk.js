(window["webpackJsonphacker-news"]=window["webpackJsonphacker-news"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(29)},,,,,function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),l=(n(14),n(2)),s=(n(23),"/hacker-news-reader");function i(e){var t=e.children,n=function(e){var t=e.isCurrent;return{className:"/hacker-news-reader"===e.href&&t?"current":t?"current":""}};return r.a.createElement("div",{className:"wrapper container"},r.a.createElement("nav",{className:"nav-wrapper"},r.a.createElement("ul",{className:"top-menu"},r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"".concat(s,"/")},"New Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"".concat(s,"/best")},"Best Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"".concat(s,"/top")},"Top Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"".concat(s,"/ask")},"Ask Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"".concat(s,"/job")},"Job Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"".concat(s,"/show")},"Show Stories")))),t)}var u=n(1),m=n(4),f=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){return null}},d=function(e,t){localStorage.setItem(e,JSON.stringify(t))};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E="https://hacker-news.firebaseio.com/v0",h=function(e){return"".concat(E,"/user/").concat(e,".json")},v=function(){return"".concat(E,"/topstories.json")},g=function(){return"".concat(E,"/beststories.json")},w=function(){return"".concat(E,"/newstories.json")},j=function(){return"".concat(E,"/askstories.json")},O=function(){return"".concat(E,"/jobstories.json")},y=function(){return"".concat(E,"/showstories.json")},N=function(e){return fetch((t=e,"".concat(E,"/item/").concat(t,".json"))).then((function(t){if(!t.ok)throw new Error("Sorry! Fetching error...");return t.clone().text().then((function(t){return n=e,a=t,void sessionStorage.setItem(n,a);var n,a})),t.json()})).catch((function(e){return console.log(e),null}));var t},k=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case"top":e=v();break;case"best":e=g();break;case"ask":e=j();break;case"job":e=O();break;case"show":e=y();break;default:e=w()}return fetch(e,b({},n)).then((function(e){if(!e.ok)throw new Error("Sorry! Fetching error...");return e.json()})).catch((function(e){return console.log(e),null}))},S=function(e){var t=Object(a.useState)(function(e){try{return JSON.parse(sessionStorage.getItem(e))}catch(t){return null}}(e)),n=Object(u.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),s=l[0],i=l[1],m=Object(a.useState)(0),f=Object(u.a)(m,2),d=f[0],p=f[1];return Object(a.useEffect)((function(){if(!r&&d<3){var t=!0;return N(e).then((function(e){t&&(e?(i(!1),c(e)):(i(!0),setTimeout((function(){return t&&p((function(e){return e+1}))}),3e3)))})).catch((function(e){t&&i(!0),setTimeout((function(){return t&&p((function(e){return e+1}))}),3e3)})),function(){t=!1}}}),[e,d]),[r,s]},P=r.a.memo((function(){return r.a.createElement("div",{className:"error-message"},"Sorry! Try again later :(")})),T=(n(24),function(e){return function(t){return t&&t.length?t.map((function(t){return r.a.createElement(e,{key:t,id:t})})):null}}),C=function(e){var t=new Date(1e3*+e),n=t.toDateString().split(" "),a=Object(u.a)(n,4),r=a[1],c=a[2],o=a[3],l=t.toLocaleTimeString().split(":").slice(0,2).join(":");return"".concat(r," ").concat(c,", ").concat(o," at ").concat(l)},_=function(e){return{__html:e}};var A=T((function(e){var t=e.id,n=S(t),a=Object(u.a)(n,2),c=a[0];return a[1]?null:c?r.a.createElement("div",{className:"story-comment"},r.a.createElement("div",{className:"comment-top"},r.a.createElement(l.a,{className:"comment-author",to:"../../user/".concat(c.by)},c.by),r.a.createElement("span",{className:"comment-time"},C(c.time))),r.a.createElement("hr",null),r.a.createElement("div",{className:"comment-content",dangerouslySetInnerHTML:_(c.text)})):r.a.createElement("div",{className:"story-comment"},r.a.createElement("div",{className:"comment-top"},r.a.createElement(l.a,{className:"comment-author loading",to:"",onClick:function(e){return e.preventDefault()}}),r.a.createElement("span",{className:"comment-time loading"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"comment-content loading"}),r.a.createElement("div",{className:"comment-content loading"}),r.a.createElement("div",{className:"comment-content last-line loading"}))}));function L(e){var t=e.commentsList,n=Object(a.useState)([]),c=Object(u.a)(n,2),o=c[0],l=c[1],s=Object(a.useState)(!1),i=Object(u.a)(s,2),m=i[0],f=i[1];return Object(a.useEffect)((function(){!t||t&&!t.length||l(m?t:t.slice(0,5))}),[m]),t&&t.length?r.a.createElement("div",{className:"full-story-comments"},r.a.createElement("h5",null,"Comments:"),A(o),t&&t.length>5&&!m?r.a.createElement("div",{className:"",style:{textAlign:"center"}},r.a.createElement("button",{onClick:function(){return f(!0)}},"Load more (",t.length-5,")")):null):null}var I=function(e){var t,n=e.itemId,a=S(n),c=Object(u.a)(a,2),o=c[0];return c[1]?r.a.createElement(P,null):o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"full-story-top"},r.a.createElement(l.a,{to:"#",onClick:function(){return window.history.back()},className:"back-button"},r.a.createElement("span",null,"\u21d0 Back"))),r.a.createElement("div",{className:"full-story"},r.a.createElement("h1",{className:"title"},o.title),r.a.createElement("div",{dangerouslySetInnerHTML:(t=o.text,{__html:t})}),o.url?r.a.createElement("div",{className:"full-story-bottom"},r.a.createElement("a",{target:"_blank",href:o.url,rel:"noopener noreferrer"},"Read original \u21d2")):null),r.a.createElement(L,{commentsList:o.kids})):null},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new",t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),s=l[0],i=l[1],m=Object(a.useState)(0),f=Object(u.a)(m,2),d=f[0],p=f[1];return Object(a.useEffect)((function(){if(d<3){var t=!0,n=new AbortController;return k(e,{signal:n.signal}).then((function(e){t&&(e?(i(!1),c(e)):(i(!0),setTimeout((function(){return t&&p((function(e){return e+1}))}),3e3)))})).catch((function(e){t&&i(!0),setTimeout((function(){return t&&p((function(e){return e+1}))}),3e3)})),function(){t=!1,n.abort()}}}),[e,d]),[r,s]},x={perPage:f("perPage")||5,prevUrl:f("prevUrl")||"",prevPage:f("prevPage")||0};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=Object(a.createContext)(),W=function(e,t){switch(t.type){case"SET_PER_PAGE":return d("perPage",t.payload),F({},e,{perPage:t.payload});case"SET_PREV_URL":return d("prevUrl",t.payload),F({},e,{prevUrl:t.payload});case"SET_PREV_PAGE":return d("prevPage",t.payload),F({},e,{prevPage:t.payload});default:return e}},B=function(){var e=Object(a.useContext)(U);if(void 0===e)throw new Error("useAppContext should be used within AppContextProvider");return e},J=function(e){var t=e.children,n=Object(a.useReducer)(W,x),c=Object(u.a)(n,2),o=c[0],l=c[1];return r.a.createElement(U.Provider,{value:[o,l]},t)},V=Math.ceil,H=function(e,t,n){var a=[],r=e-2,c=r<0?-1*r+e+2:e+2;if(r=r<0?0:r,!t)return a;c>=(t-=1)&&(r-=c-t,c=t);for(var o=function(e){a.push([e+1,function(){return n(e)}])},l=r=r<0?0:r;l<=c;l++)o(l);return a},G=function(e,t,n){var r=B(),c=Object(u.a)(r,2)[1],o=Object(a.useState)(n),l=Object(u.a)(o,2),s=l[0],i=l[1],m=Object(a.useState)(t),f=Object(u.a)(m,2),d=f[0],p=f[1],b=Object(a.useState)(V(e/s)),E=Object(u.a)(b,2),h=E[0],v=E[1],g=Object(a.useState)(H(d,h,p)),w=Object(u.a)(g,2),j=w[0],O=w[1];return Object(a.useEffect)((function(){e&&(c({type:"SET_PER_PAGE",payload:s}),v(V(e/s)))}),[e,s]),Object(a.useEffect)((function(){e&&h&&(c({type:"SET_PREV_PAGE",payload:d}),O(H(d,h,p)),document.body.scrollIntoView({behavior:"smooth"}))}),[h,d]),[d,s,j,i,p]},M=function(e,t,n){var r=Object(a.useState)(e.slice(t*n,(t+1)*n)),c=Object(u.a)(r,2),o=c[0],l=c[1];return Object(a.useEffect)((function(){l(e.slice(t*n,(t+1)*n))}),[e,n,t]),o};n(25);var Y=r.a.memo((function(e){var t=e.id,n=S(t),a=Object(u.a)(n,2),c=a[0];return a[1]?r.a.createElement(P,null):c?r.a.createElement("div",{className:"short-story row"},r.a.createElement("h4",{className:"story-title"},r.a.createElement(l.a,{to:"./story/".concat(c.id)},c.title)),r.a.createElement("div",{className:"story-short-bottom"},r.a.createElement("span",{className:"story-author"},"by ",r.a.createElement(l.a,{to:"./user/".concat(c.by)},c.by)),r.a.createElement("span",{className:"story-date"},C(c.time)))):r.a.createElement("div",{className:"short-story preloading"},r.a.createElement("h4",{className:"story-title loading","aria-hidden":"true"}),r.a.createElement("div",{className:"story-short-bottom"},r.a.createElement("span",{className:"story-author loading"}),r.a.createElement("span",{className:"story-date loading"})))})),$=(n(26),r.a.memo((function(e){var t=e.pages,n=e.currentPage;return t&&t.length?r.a.createElement("div",{className:"pages row"},r.a.createElement("ul",{className:"pagination"},t.map((function(e){var t=Object(u.a)(e,2),a=t[0],c=t[1];return r.a.createElement("li",{key:a},r.a.createElement("button",{className:"btn-link ".concat(a===n+1?"current":""),onClick:a===n+1?function(){}:function(){return c()}},a))})))):null}))),q=(n(27),r.a.memo((function(e){var t=e.perPage,n=e.handler;return r.a.createElement("div",{className:"per-page-wrapper row"},r.a.createElement("select",{defaultValue:t,onChange:function(e){return n(+e.target.value)}},r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"15"},"15")))}))),z=r.a.memo((function(){return r.a.createElement("div",{className:"error-page"},r.a.createElement("h1",{style:{textAlign:"center"}},"404"),r.a.createElement("p",null,"Sorry! Wrong url..."),r.a.createElement("div",null,r.a.createElement(l.a,{to:"./"},"Home")))})),K=T(Y),Q=["","best","top","ask","job","show"],X=function(e){var t=e["*"],n=B(),c=Object(u.a)(n,2),o=c[0],l=c[1],s=R(t),i=Object(u.a)(s,2),m=i[0],f=i[1],d=G(m.length,o.prevPage,o.perPage),p=Object(u.a)(d,5),b=p[0],E=p[1],h=p[2],v=p[3],g=p[4],w=M(m,b,E);return Object(a.useEffect)((function(){o.prevUrl!==t&&g(0),l({type:"SET_PREV_URL",payload:t})}),[t]),Object(a.useEffect)((function(){h.length&&(-1===h.map((function(e){return Object(u.a)(e,1)[0]-1})).indexOf(b)&&(b>0?h[h.length-1][1]():h[0]&&h[0][1]&&h[0][1]()))}),[h]),Q.includes(t)?f?r.a.createElement(P,null):r.a.createElement("div",{className:"news-feed-wrapper"},r.a.createElement("h1",null,{"":"New Stories Feed",best:"Best Stories Feed",top:"Top Stories Feed",ask:"Ask Stories Feed",job:"Job Stories Feed",show:"Show Stories Feed"}[t]),r.a.createElement(q,{perPage:E,handler:function(e){return v(e)}}),K(w),m.length&&h.length>1?r.a.createElement($,{pages:h,currentPage:b}):null):r.a.createElement(z,null)},Z=function(e){var t=e.id,n=S(t),a=Object(u.a)(n,2),c=a[0];return a[1]?null:c?c&&"comment"===c.type?null:r.a.createElement("div",{className:"user-story-title"},r.a.createElement(l.a,{to:"../../story/".concat(t)},c.title)):r.a.createElement("div",{className:"user-story-title loading"})},ee=(n(28),T(Z)),te=r.a.memo((function(e){var t,n=e.userId,c=Object(a.useState)(null),o=Object(u.a)(c,2),l=o[0],s=o[1],i=Object(a.useState)(!1),m=Object(u.a)(i,2),f=m[0],d=m[1];return Object(a.useEffect)((function(){var e=!0,t=new AbortController;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(h(e),b({},t)).then((function(e){if(!e.ok)throw new Error("Sorry! Fetching error...");return e.json()})).catch((function(e){return console.log(e),null}))}(n,{signal:t.signal}).then((function(t){e&&(t?(s(t),d(!1)):d(!0))})).catch((function(t){console.log(t),e&&d(!0)})),function(){e=!1,t.abort()}}),[n]),f?r.a.createElement(P,null):l?r.a.createElement("div",{className:"user-wrapper row"},r.a.createElement("div",{className:"two columns"},r.a.createElement("button",{className:"btn-link back-button",onClick:function(){return window.history.back()}},"\u21d0 Back")),r.a.createElement("div",{className:"ten columns"},r.a.createElement("h3",{className:"user-name-field"},l.id),r.a.createElement("div",{className:"user-info",dangerouslySetInnerHTML:(t=l.about,{__html:t})}),r.a.createElement("hr",null),ee(l.submitted.slice(0,10)))):r.a.createElement("div",{className:"user-wrapper row"},r.a.createElement("div",{className:"two columns"},r.a.createElement("button",{className:"btn-link back-button",onClick:function(){return window.history.back()}},"\u21d0 Back")),r.a.createElement("div",{className:"ten columns"},r.a.createElement("h3",{className:"user-name-field loading","aria-hidden":"true"}),r.a.createElement("div",{className:"user-info loading"}),r.a.createElement("div",{className:"user-info loading"}),r.a.createElement("div",{className:"user-info last-line loading"}),r.a.createElement("hr",null)))})),ne=function(e){return function(){window.scrollY>2*window.innerHeight?e.classList.add("show"):e.classList.remove("show")}},ae=function(e){e.preventDefault(),document.body.scrollIntoView({behavior:"smooth"})};var re=function(){var e=Object(a.useRef)();return Object(a.useEffect)((function(){if(null!==e.current){var t=ne(e.current);return window.addEventListener("scroll",t),function(){return window.removeEventListener("scroll",t)}}}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(J,null,r.a.createElement(l.b,{basepath:"".concat(s)},r.a.createElement(i,{path:"/",default:!0},r.a.createElement(X,{path:"/*"}),r.a.createElement(I,{path:"story/:itemId"}),r.a.createElement(te,{path:"user/:userId"}))),r.a.createElement("a",{ref:e,href:"",className:"scroll-top",onClick:function(e){return ae(e)}},"Top")))},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(re,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/hacker-news-reader",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/hacker-news-reader","/service-worker.js");ce?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):oe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):oe(t,e)}))}}()}],[[9,1,2]]]);
//# sourceMappingURL=main.8d436d35.chunk.js.map