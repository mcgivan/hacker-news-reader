(window["webpackJsonphacker-news"]=window["webpackJsonphacker-news"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(29)},,,,,function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),o=n.n(c),l=(n(14),n(2));n(23);function s(e){var t=e.children,n=function(e){var t=e.isCurrent;return{className:"/hacker-news-reader"===e.href&&t?"current":t?"current":""}};return r.a.createElement("div",{className:"wrapper container"},r.a.createElement("nav",{className:"nav-wrapper"},r.a.createElement("ul",{className:"top-menu"},r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"./"},"New Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"./best"},"Best Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"./top"},"Top Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"./ask"},"Ask Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"./job"},"Job Stories")),r.a.createElement("li",{className:"top-menu-link"},r.a.createElement(l.a,{getProps:n,to:"./show"},"Show Stories")))),t)}var i=n(1),u=n(8);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d="https://hacker-news.firebaseio.com/v0",h=function(e){return"".concat(d,"/user/").concat(e,".json")},b=function(){return"".concat(d,"/topstories.json")},E=function(){return"".concat(d,"/beststories.json")},v=function(){return"".concat(d,"/newstories.json")},p=function(){return"".concat(d,"/askstories.json")},g=function(){return"".concat(d,"/jobstories.json")},w=function(){return"".concat(d,"/showstories.json")},j=function(e){return fetch((t=e,"".concat(d,"/item/").concat(t,".json"))).then((function(t){if(!t.ok)throw new Error("Sorry! Fetching error...");return t.clone().text().then((function(t){return n=e,a=t,void sessionStorage.setItem(n,a);var n,a})),t.json()})).catch((function(e){return console.log(e),null}));var t},O=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case"top":e=b();break;case"best":e=E();break;case"ask":e=p();break;case"job":e=g();break;case"show":e=w();break;default:e=v()}return fetch(e,f({},n)).then((function(e){if(!e.ok)throw new Error("Sorry! Fetching error...");return e.json()})).catch((function(e){return console.log(e),null}))},N=function(e){var t=Object(a.useState)(function(e){try{return JSON.parse(sessionStorage.getItem(e))}catch(t){return null}}(e)),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),l=Object(i.a)(o,2),s=l[0],u=l[1],m=Object(a.useState)(0),f=Object(i.a)(m,2),d=f[0],h=f[1];return Object(a.useEffect)((function(){if(!r&&d<3){var t=!0;return j(e).then((function(e){t&&(e?(u(!1),c(e)):(u(!0),setTimeout((function(){return t&&h((function(e){return e+1}))}),3e3)))})).catch((function(e){t&&u(!0),setTimeout((function(){return t&&h((function(e){return e+1}))}),3e3)})),function(){t=!1}}}),[e,d]),[r,s]},y=r.a.memo((function(){return r.a.createElement("div",{className:"error-message"},"Sorry! Try again later :(")})),k=(n(24),function(e){return function(t){return t&&t.length?t.map((function(t){return r.a.createElement(e,{key:t,id:t})})):null}}),S=function(e){var t=new Date(1e3*+e),n=t.toDateString().split(" "),a=Object(i.a)(n,4),r=a[1],c=a[2],o=a[3],l=t.toLocaleTimeString().split(":").slice(0,2).join(":");return"".concat(r," ").concat(c,", ").concat(o," at ").concat(l)},P=function(e){return{__html:e}};var C=k((function(e){var t=e.id,n=N(t),a=Object(i.a)(n,2),c=a[0];return a[1]?null:c?r.a.createElement("div",{className:"story-comment"},r.a.createElement("div",{className:"comment-top"},r.a.createElement(l.a,{className:"comment-author",to:"../../user/".concat(c.by)},c.by),r.a.createElement("span",{className:"comment-time"},S(c.time))),r.a.createElement("hr",null),r.a.createElement("div",{className:"comment-content",dangerouslySetInnerHTML:P(c.text)})):r.a.createElement("div",{className:"story-comment"},r.a.createElement("div",{className:"comment-top"},r.a.createElement(l.a,{className:"comment-author loading",to:"",onClick:function(e){return e.preventDefault()}}),r.a.createElement("span",{className:"comment-time loading"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"comment-content loading"}),r.a.createElement("div",{className:"comment-content loading"}),r.a.createElement("div",{className:"comment-content last-line loading"}))}));function T(e){var t=e.commentsList,n=Object(a.useState)([]),c=Object(i.a)(n,2),o=c[0],l=c[1],s=Object(a.useState)(!1),u=Object(i.a)(s,2),m=u[0],f=u[1];return Object(a.useEffect)((function(){!t||t&&!t.length||l(m?t:t.slice(0,5))}),[m]),t&&t.length?r.a.createElement("div",{className:"full-story-comments"},r.a.createElement("h5",null,"Comments:"),C(o),t&&t.length>5?r.a.createElement("button",{onClick:function(){return f(!0)}},"Load more (",t.length-5,")"):null):null}var L=function(e){var t,n=e.itemId,a=N(n),c=Object(i.a)(a,2),o=c[0];return c[1]?r.a.createElement(y,null):o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"full-story-top"},r.a.createElement(l.a,{to:"#",onClick:function(){return window.history.back()},className:"back-button"},r.a.createElement("span",null,"\u21d0 Back"))),r.a.createElement("div",{className:"full-story"},r.a.createElement("h1",{className:"title"},o.title),r.a.createElement("div",{dangerouslySetInnerHTML:(t=o.text,{__html:t})}),o.url?r.a.createElement("div",{className:"full-story-bottom"},r.a.createElement("a",{target:"_blank",href:o.url,rel:"noopener noreferrer"},"Read original \u21d2")):null),r.a.createElement(T,{commentsList:o.kids})):null},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new",t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),l=Object(i.a)(o,2),s=l[0],u=l[1],m=Object(a.useState)(0),f=Object(i.a)(m,2),d=f[0],h=f[1];return Object(a.useEffect)((function(){if(d<3){var t=!0,n=new AbortController;return O(e,{signal:n.signal}).then((function(e){t&&(e?(u(!1),c(e)):(u(!0),setTimeout((function(){return t&&h((function(e){return e+1}))}),3e3)))})).catch((function(e){t&&u(!0),setTimeout((function(){return t&&h((function(e){return e+1}))}),3e3)})),function(){t=!1,n.abort()}}}),[e,d]),[r,s]},F=Math.ceil,A=function(e,t,n){var a=[],r=e-2,c=r<0?-1*r+e+2:e+2;if(r=r<0?0:r,!t)return a;c>=(t-=1)&&(r-=c-t,c=t);for(var o=function(e){a.push([e+1,function(){return n(e)}])},l=r=r<0?0:r;l<=c;l++)o(l);return a},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=Object(a.useState)(n),c=Object(i.a)(r,2),o=c[0],l=c[1],s=Object(a.useState)(t),u=Object(i.a)(s,2),m=u[0],f=u[1],d=Object(a.useState)(F(e/o)),h=Object(i.a)(d,2),b=h[0],E=h[1],v=Object(a.useState)(A(m,b,f)),p=Object(i.a)(v,2),g=p[0],w=p[1];return Object(a.useEffect)((function(){e&&E(F(e/o))}),[e,o]),Object(a.useEffect)((function(){e&&b&&(w(A(m,b,f)),document.body.scrollIntoView({behavior:"smooth"}))}),[b,m]),[m,o,g,l,f]},W=function(e,t,n){var r=Object(a.useState)(e.slice(t*n,(t+1)*n)),c=Object(i.a)(r,2),o=c[0],l=c[1];return Object(a.useEffect)((function(){l(e.slice(t*n,(t+1)*n))}),[e,n,t]),o};n(25);var x=r.a.memo((function(e){var t=e.id,n=N(t),a=Object(i.a)(n,2),c=a[0];return a[1]?r.a.createElement(y,null):c?r.a.createElement("div",{className:"short-story row"},r.a.createElement("h4",{className:"story-title"},r.a.createElement(l.a,{to:"./story/".concat(c.id)},c.title)),r.a.createElement("div",{className:"story-short-bottom"},r.a.createElement("span",{className:"story-author"},"by ",r.a.createElement(l.a,{to:"./user/".concat(c.by)},c.by)),r.a.createElement("span",{className:"story-date"},S(c.time)))):r.a.createElement("div",{className:"short-story preloading"},r.a.createElement("h4",{className:"story-title loading","aria-hidden":"true"}),r.a.createElement("div",{className:"story-short-bottom"},r.a.createElement("span",{className:"story-author loading"}),r.a.createElement("span",{className:"story-date loading"})))})),B=(n(26),r.a.memo((function(e){var t=e.pages,n=e.currentPage;return t&&t.length?r.a.createElement("div",{className:"pages row"},r.a.createElement("ul",{className:"pagination"},t.map((function(e){var t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement("li",{key:a},r.a.createElement("button",{className:"btn-link ".concat(a===n+1?"current":""),onClick:a===n+1?function(){}:function(){return c()}},a))})))):null}))),_=(n(27),r.a.memo((function(e){var t=e.perPage,n=e.handler;return r.a.createElement("div",{className:"per-page-wrapper row"},r.a.createElement("select",{defaultValue:t,onChange:function(e){return n(+e.target.value)}},r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"15"},"15")))}))),H=r.a.memo((function(){return r.a.createElement("div",{className:"error-page"},r.a.createElement("h1",{style:{textAlign:"center"}},"404"),r.a.createElement("p",null,"Sorry! Wrong url..."),r.a.createElement("div",null,r.a.createElement(l.a,{to:"./"},"Home")))})),J=k(x),R=["","best","top","ask","job","show"],M=function(e){var t=e["*"],n=I(t),c=Object(i.a)(n,2),o=c[0],l=c[1],s=D(o.length),u=Object(i.a)(s,5),m=u[0],f=u[1],d=u[2],h=u[3],b=u[4],E=W(o,m,f);return Object(a.useEffect)((function(){b(0)}),[t]),Object(a.useEffect)((function(){d.length&&(-1===d.map((function(e){return Object(i.a)(e,1)[0]-1})).indexOf(m)&&(m>0?d[d.length-1][1]():d[0]&&d[0][1]&&d[0][1]()))}),[d]),R.includes(t)?l?r.a.createElement(y,null):r.a.createElement("div",{className:"news-feed-wrapper"},r.a.createElement("h1",null,{"":"New Stories Feed",best:"Best Stories Feed",top:"Top Stories Feed",ask:"Ask Stories Feed",job:"Job Stories Feed",show:"Show Stories Feed"}[t]),r.a.createElement(_,{perPage:f,handler:function(e){return h(e)}}),J(E),o.length&&d.length>1?r.a.createElement(B,{pages:d,currentPage:m}):null):r.a.createElement(H,null)},U=function(e){var t=e.id,n=N(t),a=Object(i.a)(n,2),c=a[0];return a[1]?null:c?c&&"comment"===c.type?null:r.a.createElement("div",{className:"user-story-title"},r.a.createElement(l.a,{to:"../../story/".concat(t)},c.title)):r.a.createElement("div",{className:"user-story-title loading"})},V=(n(28),k(U)),Y=r.a.memo((function(e){var t,n=e.userId,c=Object(a.useState)(null),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(!1),m=Object(i.a)(u,2),d=m[0],b=m[1];return Object(a.useEffect)((function(){var e=!0,t=new AbortController;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(h(e),f({},t)).then((function(e){if(!e.ok)throw new Error("Sorry! Fetching error...");return e.json()})).catch((function(e){return console.log(e),null}))}(n,{signal:t.signal}).then((function(t){e&&(t?(s(t),b(!1)):b(!0))})).catch((function(t){console.log(t),e&&b(!0)})),function(){e=!1,t.abort()}}),[n]),d?r.a.createElement(y,null):l?r.a.createElement("div",{className:"user-wrapper row"},r.a.createElement("div",{className:"two columns"},r.a.createElement("button",{className:"btn-link back-button",onClick:function(){return window.history.back()}},"\u21d0 Back")),r.a.createElement("div",{className:"ten columns"},r.a.createElement("h3",{className:"user-name-field"},l.id),r.a.createElement("div",{className:"user-info",dangerouslySetInnerHTML:(t=l.about,{__html:t})}),r.a.createElement("hr",null),V(l.submitted.slice(0,10)))):r.a.createElement("div",{className:"user-wrapper row"},r.a.createElement("div",{className:"two columns"},r.a.createElement("button",{className:"btn-link back-button",onClick:function(){return window.history.back()}},"\u21d0 Back")),r.a.createElement("div",{className:"ten columns"},r.a.createElement("h3",{className:"user-name-field loading","aria-hidden":"true"}),r.a.createElement("div",{className:"user-info loading"}),r.a.createElement("div",{className:"user-info loading"}),r.a.createElement("div",{className:"user-info last-line loading"}),r.a.createElement("hr",null)))})),$=function(e){return function(){window.scrollY>2*window.innerHeight?e.classList.add("show"):e.classList.remove("show")}},q=function(e){e.preventDefault(),document.body.scrollIntoView({behavior:"smooth"})};var z=function(){var e=Object(a.useRef)();return Object(a.useEffect)((function(){if(null!==e.current){var t=$(e.current);return window.addEventListener("scroll",t),function(){return window.removeEventListener("scroll",t)}}}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{basepath:"/hacker-news-reader"},r.a.createElement(s,{path:"/"},r.a.createElement(M,{path:"/*"}),r.a.createElement(L,{path:"story/:itemId"}),r.a.createElement(Y,{path:"user/:userId"}))),r.a.createElement("a",{ref:e,href:"",className:"scroll-top",onClick:function(e){return q(e)}},"Top"))},G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/hacker-news-reader",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/hacker-news-reader","/service-worker.js");G?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):K(t,e)}))}}()}],[[9,1,2]]]);
//# sourceMappingURL=main.c89369a5.chunk.js.map